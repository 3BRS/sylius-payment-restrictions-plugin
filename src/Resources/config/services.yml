services:
    _defaults:
        autowire: false
        autoconfigure: false
        public: false

    ThreeBRS\SyliusPaymentRestrictionPlugin\PaymentResolver\Filter\PaymentMethodsFilter:
        arguments:
            $zoneMatcher: '@sylius.zone_matcher'

    ThreeBRS\SyliusPaymentRestrictionPlugin\Model\ThreeBRSSyliusResolvePaymentMethodForOrder:
        alias: ThreeBRS\SyliusPaymentRestrictionPlugin\PaymentResolver\Filter\PaymentMethodsFilter

    ThreeBRS\SyliusPaymentRestrictionPlugin\PaymentResolver\PaymentMethodsResolver:
        tags:
            - name: "sylius.payment_method_resolver"
              type: "channel_based"
              label: "sylius.payment_methods_resolver.channel_based"
              priority: 100
        arguments:
            $paymentMethodRepository: '@sylius.repository.payment_method'
            $paymentMethodsFilter: '@ThreeBRS\SyliusPaymentRestrictionPlugin\PaymentResolver\Filter\PaymentMethodsFilter'

    ThreeBRS\SyliusPaymentRestrictionPlugin\Form\Extension\RestrictionPaymentMethodExtension:
        tags:
            - extended_type: Sylius\Bundle\PaymentBundle\Form\Type\PaymentMethodType
              name: form.type_extension
        arguments:
            $shippingMethodClass: '%sylius.model.shipping_method.class%'
